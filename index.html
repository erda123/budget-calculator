<script>
// --- Упрощённая версия, только нужная часть ---

const expensesListEl = document.getElementById('expensesList')
let expenses = [
  { id: 1, name: 'Питание', value: 6000 },
  { id: 2, name: 'Транспорт', value: 2000 },
  { id: 3, name: 'Развлечения', value: 0 }
]

function createExpenseRow(e) {
  const wrap = document.createElement('div')
  wrap.className = 'expense'

  const name = document.createElement('input')
  name.type = 'text'
  name.value = e.name
  name.addEventListener('input', ev => {
    e.name = ev.target.value
  })

  const val = document.createElement('input')
  val.type = 'number'
  val.value = e.value
  val.style.width = '120px'
  val.addEventListener('input', ev => {
    e.value = Number(ev.target.value)
    updateAll() // обновляет результаты, но не перерисовывает поля
  })

  const del = document.createElement('button')
  del.textContent = 'Удалить'
  del.className = 'ghost'
  del.addEventListener('click', () => {
    expenses = expenses.filter(x => x.id !== e.id)
    renderExpenses()
    updateAll()
  })

  wrap.appendChild(name)
  wrap.appendChild(val)
  wrap.appendChild(del)
  return wrap
}

function renderExpenses() {
  expensesListEl.innerHTML = ''
  expenses.forEach(e => {
    const row = createExpenseRow(e)
    expensesListEl.appendChild(row)
  })
}

// Добавить и сбросить
document.getElementById('addExpenseBtn').addEventListener('click', () => {
  expenses.push({ id: Date.now(), name: 'Новый расход', value: 0 })
  renderExpenses()
  updateAll()
})

document.getElementById('resetExpenses').addEventListener('click', () => {
  expenses = [
    { id: 1, name: 'Питание', value: 6000 },
    { id: 2, name: 'Транспорт', value: 2000 }
  ]
  renderExpenses()
  updateAll()
})
</script>
